<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />	
		<title>Visor Parque de la Vida</title>
		<link rel="shortcut icon" type="image/x-icon" href="images/ico.png" />
		<!-- Leaflet -->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" 
			integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin=""/>		
		<!-- Plugin Leyenda -->
		<link rel="stylesheet" href="plugins/L.Control.HtmlLegend.css" />
		<!-- Plugin pantalla completa -->		
		<link rel="stylesheet" href="plugins/Control.FullScreen.css">
		<!-- Plugin Minmapa -->
		<link rel="stylesheet" href="plugins/Control.MiniMap.css" />
		<!-- Capas de Google -->		
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaSBSTv2RhP_DRnZKYgzyy03KdlROXHa8" async defer></script>
		<!-- Plugin Geocoding -->		
		<link rel="stylesheet" href="plugins/Control.Geocoder.css" />
		<!-- Plugin Geolocation -->	
		<link rel="stylesheet" href="plugins/L.Control.Locate.min.css" />		
		<!-- Plugin Sidebar -->		
		<link rel="stylesheet" href="plugins/L.Control.Sidebar.css">
		<!-- Plugin home -->		
		<link rel="stylesheet" href="plugins/font-awesome.min.css"/>
		<link rel="stylesheet" href="plugins/leaflet.zoomhome.css"/>		
		<style>
			body {
				padding: 0;
				margin: 0;
				}
				html, body, #map {
				height: 100%;
				}
			.info1 {
				padding: 1px 1px;
				font: 10px/16px Arial, Helvetica, sans-serif;
				background: white;
				text-align: center;
				line-height: 20px;
				background: rgba(255,255,255,0.8);
				box-shadow: 0 0 15px rgba(0,0,0,0.2);
				border-radius: 5px;
				}
			.info2 {
				padding: 6px 8px;
				font: 14px/16px Arial, Helvetica, sans-serif;
				background: white;
				text-align: center;
				line-height: 25px;
				background: rgba(255,255,255,0.8);
				box-shadow: 0 0 15px rgba(0,0,0,0.2);
				border-radius: 5px;
			}
			.info h2 {
				margin: 0 0 5px;
				color: #777;
			}
			h3 { 
				width: 270px;
				display: block;
				font-size: 1.4em;
				margin-top: 0.0em;
				margin-bottom: 0.0em;
				margin-left: 0;
				margin-right: 0;
				font-weight: bold;
			}
			h5 { 
				display: block;
				margin-top: 0.0em;
				margin-bottom: 0.0em;
				margin-left: 0;
				margin-right: 0;
				font-weight: bold;
			}
			#norte {
				position:absolute;
				left:50px;
				top:20px;
				overflow: hidden;
				border: none;
				background-color: rgb(0,0,255);
				opacity: 0.7;
				border-radius: 800px;
				z-index:2000;
			}
			.legend {
				 line-height: 18px;
				 text-align: center;
				 color: #555;
			}
			.legend i {
				 width: 18px;
				 height: 18px;
				 float: left;
				 margin-right: 8px;
				 opacity: 0.7;
			}
			.label {
				padding: 50px 50px;
				font: 14px/16px Arial, Helvetica, sans-serif;
				background: white;
				background: rgba(255,255,255,0.8);
				box-shadow: 0 0 15px rgba(0,0,0,0.2);
				border-radius: 7px;
			}
			.botoninfo	{
				padding: 0px 0px;
				width: 34px;
				height: 34px;
				box-shadow: 0 0 15px rgba(0,0,0,0.2);
				background: "white";
				border-radius: 5px
				z-index:2001;
			}
			.leaflet-control.leaflet-bar.leaflet-html-legend	{
				width: 300px;
				line-height: 20px;
			}
			.leaflet-control-layers.leaflet-control-layers-expanded.leaflets-control	{
				width: 180px;
				padding: 20px 8px;
				line-height: 25px;
			}
			.h4.closed	{
				line-height: 1px;
				display: block;
				font-size: 1.4em;
				margin-top: 0.0em;
				margin-bottom: 0.0em;
				margin-left: 0;
				margin-right: 0;
				font-weight: bold;
			}
			.legend-row {
				line-height: 15px;
				display: block;
				font-size: 1.4em;
				margin-top: 0.0em;
				margin-bottom: 0.0em;
				margin-left: 0;
				margin-right: 0;
				font-weight: bold;
			}
			.leaflet-control-minimap leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom leaflet-control{
				padding: 0px 0px;
				width: 34px;
				height: 34px;
			}
			
		</style>
	</head>
	
	<body>
		<!-- Leaflet -->					
		<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
			integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin=""></script>
		<!-- Plugin Leyenda -->
		<script src="plugins/L.Control.HtmlLegend.min.js"></script>
		<!-- Plugin FullScreen -->		
		<script src="plugins/Control.FullScreen.js"></script>
		<!-- Plugin minimapa -->			
		<script src="plugins/Control.MiniMap.js" type="text/javascript"></script> 
		<!-- Plugin zoomhome -->			
		<script src="plugins/leaflet.zoomhome.min.js"></script>
		<!-- Plugin localizador -->	
		<script src="plugins/Control.Geocoder.js"></script>
		<!-- Plugin Geolocation -->			
		<script src="plugins/L.Control.Locate.js" ></script>
		<!-- Plugin capas de Google -->
		<script src='https://unpkg.com/leaflet.gridlayer.googlemutant@latest/Leaflet.GoogleMutant.js'></script>
		<!-- Plugin sidebar -->		
		<script src="plugins/L.Control.Sidebar.js"></script>
		<script src="plugins/L.Control.Button.js"></script>
		<!-- Plugin markers -->	
		<script src="plugins/qgis2web_expressions.js"></script>
        <script src="plugins/multi-style-layer.js"></script>
        <script src="plugins/leaflet.rotatedMarker.js"></script>
        <script src="plugins/leaflet.pattern.js"></script>
        <script src="plugins/leaflet-hash.js"></script>
        <script src="plugins/Autolinker.min.js"></script>
        <script src="plugins/rbush.min.js"></script>
        <script src="plugins/labelgun.min.js"></script>
        <script src="plugins/labels.js"></script>
		<!-- Archivos GeoJson -->
		<script src="data/AREAS_0.js"></script>
        <script src="data/SENDAS_1.js"></script>
		<!-- botón ayuda -->
			<div id="sidebar"  style="width:290px; ">
				<h2>INSTRUCCIONES DE USO</h2>
				<p><b><img src="images/capas.png" width="16%" align="center"></img> Selecionar el mapa de la variable que desea visualizar  </b></p>
				<p><b><img src="images/dedo.png" width="12%" align="center"></img>  Deslizar sobre el mapa o pulsar para ver datos </b></p>
				<p><b><img src="images/mover.png" width="12%" align="center"></img>  Pulsar y mantener para desplazar el mapa  </b></p>				
				<p><b><img src="images/mas.png" width="16%" align="center"></img> Pulsar para acercar el mapa </b></p>	
				<p><b><img src="images/home.png" width="16%" align="center"></img> Pulsar para volver a la posición inicial </b></p>				
				<p><b><img src="images/menos.png" width="16%" align="center"></img> Pulsar para alejar el mapa </b></p>
				<p><b><img src="images/full.png" width="16%" align="center"></img> Pulsar para ver en pantalla completa </b></p>
				<p><b><img src="images/search.png" width="16%" align="center"></img> Introducir la localidad que desea buscar </b></p>
				<p><b><img src="images/info.png" width="16%" align="center"></img> Pulsar para ver las Administraciones que apoyan/cofinancian el presente visor cartográfico </b></p>
				<p><b><img src="images/minimapa.png" width="16%" align="center"></img> Pulsar para minimizar el mapa de situación </b></p>
				<p><b><img src="images/leyenda.png" width="16%" align="center"></img> Pulsar para minimizar la leyenda </b></p> <br>	
				<a href="http://www.parquedelavida.org"><img src="images/logopv.png" width="100%" ></img></a>
						</div>
		<!-- botón información -->			
			<div id="sidebar2"  style="width:410px; ">
				<h2>CON EL APOYO DE:</h2>
				<a href="http://www.parquedelavida.org/"><img src="images/logopv.png" width="75%" align="center" ></img></a>
			</div>
		<!-- Brújula -->	
			<div id="map">		
					<div id="norteImagen">
					<img id="norte" src="images/norte2.png" width="60px" height="60px"  alt="0" title="Norte" />
			</div>
		<!-- Botones -->			
			<div id="botonera"></div>
				<button id="helpbutton" role="button" class="botoninfo"><img src="images/ayuda.png" width="28" height="28" align="left"></button>
					<!-- Botón Sidebar2  -->
			<div id="botonera2"></div>
			<button id="helpbutton2" role="button2" class="botoninfo2"><img src="images/info.png" width="32" height="35"></button>
		<!-- Mapa -->			
			<script>
			var map = L.map('map', {
					zoomControl: false,
					center: [43.5405, -6.5666],
					zoom: 18,
					minZoom: 1,
					maxZoom: 20,
					maxBounds: [
						[20, -50],
						[50, 50]
						],
					});
					//Layers on top
					map.createPane('labels');
						// This pane is above markers but below popups
					map.getPane('labels').style.zIndex = 500;
						// Layers in this pane are non-interactive and do not obscure mouse/touch events
					map.getPane('labels').style.pointerEvents = 'none';
					

//Markers
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;
            highlightLayer.openPopup();
        }
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
            if (bounds_group.getLayers().length) {
                map.fitBounds(bounds_group.getBounds());
            }
        }
//Maker/data
       function pop_AREAS_0(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row"></th>\
                        <td>' + (feature.properties['NOMBRE'] !== null ? autolinker.link(feature.properties['NOMBRE'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><br />' + (feature.properties['Foto'] !== null ? '<img src="images/' + String(feature.properties['Foto']).replace(/[\\\/:]/g, '_').trim() + '">' : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_AREAS_0_0() {
            return {
                pane: 'pane_AREAS_0',
                radius: 8.4,
                opacity: 1,
                color: 'rgba(50,87,128,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 0.1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(72,123,182,1.0)',
                interactive: true,
            }
        }
        function style_AREAS_0_1() {
            return {
                pane: 'pane_AREAS_0',
                interactive: true,
            }
        }
        map.createPane('pane_AREAS_0');
        map.getPane('pane_AREAS_0').style.zIndex = 651;
        map.getPane('pane_AREAS_0').style['mix-blend-mode'] = 'normal';
        var layer_AREAS_0 = new L.geoJson.multiStyle(json_AREAS_0, {
            attribution: '',
            interactive: true,
            dataVar: 'json_AREAS_0',
            layerName: 'layer_AREAS_0',
            pane: 'pane_AREAS_0',
            onEachFeature: pop_AREAS_0,
            pointToLayers: [function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_AREAS_0_0(feature));
            },function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_AREAS_0_1(feature));
            },
        ]});
        bounds_group.addLayer(layer_AREAS_0);
        map.addLayer(layer_AREAS_0);
        function pop_SENDAS_1(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><br />' + (feature.properties['NOMBRE'] !== null ? autolinker.link(feature.properties['NOMBRE'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_SENDAS_1_0() {
            return {
                pane: 'pane_SENDAS_1',
                interactive: true,
            }
        }
        map.createPane('pane_SENDAS_1');
        map.getPane('pane_SENDAS_1').style.zIndex = 651;
        map.getPane('pane_SENDAS_1').style['mix-blend-mode'] = 'normal';
        var layer_SENDAS_1 = new L.geoJson(json_SENDAS_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_SENDAS_1',
            layerName: 'layer_SENDAS_1',
            pane: 'pane_SENDAS_1',
            onEachFeature: pop_SENDAS_1,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_SENDAS_1_0(feature));
            },
        });
        bounds_group.addLayer(layer_SENDAS_1);
        map.addLayer(layer_SENDAS_1);
		
//Quitar capas por defecto
//       var baseMaps = {};
//       L.control.layers(baseMaps,{
//			'<img src="legend/SENDAS_1.png" /> SENDAS': layer_SENDAS_1,
//			'<img src="legend/AREAS_0.png" /> AREAS': layer_AREAS_0,}).addTo(map);
//       setBounds();

//markers/etiquetas
//		//Etiquetas Areas
//        var i = 0;
 //       layer_AREAS_0.eachLayer(function(layer) {
  //          var context = {
 //               feature: layer.feature,
//                variables: {}
//            };
//            layer.bindTooltip((layer.feature.properties['NOMBRE'] !== null?String('<div style="color: #000000; font-size: 10pt; font-family: \'MS Shell Dlg 2\', sans-serif;">' + layer.feature.properties['NOMBRE']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_AREAS_0'});
//            labels.push(layer);
//            totalMarkers += 1;
//              layer.added = true;
//              addLabel(layer, i);
//              i++;
//        });
//		//Etiquetas Sendas
//        var i = 0;
//        layer_SENDAS_1.eachLayer(function(layer) {
//            var context = {
//                feature: layer.feature,
//                variables: {}
//            };
//            layer.bindTooltip((layer.feature.properties['NOMBRE'] !== null?String('<div style="color: #000000; font-size: 10pt; font-family: \'MS Shell Dlg 2\', sans-serif;">' + layer.feature.properties['NOMBRE']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_SENDAS_1'});
//            labels.push(layer);
//            totalMarkers += 1;
//              layer.added = true;
//              addLabel(layer, i);
//              i++;
//        });

        resetLabels([layer_AREAS_0,layer_SENDAS_1]);
        map.on("zoomend", function(){
            resetLabels([layer_AREAS_0,layer_SENDAS_1]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_AREAS_0,layer_SENDAS_1]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_AREAS_0,layer_SENDAS_1]);
        });


			// Tiles
//	  var NTSE =L.tileLayer('Teselas/NTSE/{z}/{x}/{y}.png', {
//        maxZoom: 28,
//        tms: true,
//        attribution: 'Generated by QTiles', 
//		pane: 'labels' // If pane labels, layer goes on top.
//		});
	  
      var tile1 =L.tileLayer('Teselas/tile1/{z}/{x}/{y}.png', {
        maxZoom: 28,
        tms: true,
        attribution: 'Generated by QTiles',
		pane: 'labels' // If pane labels, layer goes on top.
      }).addTo(map);
  
			//Cartografía

			var Mapa_fondo = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/ {z}/{x}/{y}.png', { maxZoom: 18, opacity: 0.4, 
			attribution: '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap </a>',
			}).addTo(map);					
			var osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: 'Map data &copy'
			});
			var osm1 = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
			maxZoom: 18,
			opacity: 0,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			})
			var osm2 = new L.TileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
			minZoom: 0, 
			maxZoom: 13,
			});
			var osm3 = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/ {z}/{x}/{y}.png', { maxZoom: 18, opacity: 0.4, 
			attribution: '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap',
			});
//			//Título
//			var title2 = L.control({position: 'topright'});
//				title2.onAdd = function (map) {
//			var div = L.DomUtil.create('div', 'info2');
//				 div.innerHTML +=
//				 'VISOR CARTOGRÁFICO<h3>Parque de la vida</h3>';
//				 return div;
//				};
//				title2.addTo(map);
			//Logo Matrix	
			var title1 = L.control({position: 'topright'});
				title1.onAdd = function (map) {
			var div = L.DomUtil.create('div', 'info1');
				 div.innerHTML +=
				 '<a href="http://www.parquedelavida.org"><img src="images/logopv.png" width="100%" ></img></a>';
				 return div;
				};
				title1.addTo(map);
			//minimapa	
			var miniMap = new L.Control.MiniMap(osm2, { toggleDisplay: true, position:"bottomright", width:100,height:100,minimized:"on",}).addTo(map); 					
			//zoomHome
			var zoomHome = L.Control.zoomHome({ position: 'topleft', homeCoordinates:[43.5405, -6.5668], zoomHomeTitle:'Posición inicial'}).addTo(map);	

			//fullscreen						
			var fsControl = new L.Control.FullScreen();
				map.addControl(fsControl);
				map.on('enterFullscreen', function(){
				if(window.console) window.console.log('enterFullscreen');
				});
				map.on('exitFullscreen', function(){
				if(window.console) window.console.log('exitFullscreen');
				});
			L.control.scale().addTo(map);
			//Buscador
			var geocoder = L.Control.geocoder({ position: 'topleft',
			}).addTo(map);
			//Límites
			var sendas = L.geoJson(sendas, {
//				color: "#17202A", 
//				weight: 2,
//				opacity: 1,
//				fillOpacity: 0,
//				pane: 'labels', // If pane labels, layer goes on top.				
//				attribution: ''				
				}).addTo(map);
			var RBM = L.geoJson(RBM, {
				color: "#424242", 
				weight: 1,
				opacity: 1,
				fillOpacity: 0,
				pane: 'labels', // If pane labels, layer goes on top.
//				attribution: ''
				}).addTo(map);	
			//Capas Google
			var roadMutant = L.gridLayer.googleMutant({
				maxZoom: 24,
				type:'roadmap'
				});
			var satMutant = L.gridLayer.googleMutant({
				maxZoom: 24,
				type:'satellite'
				}).addTo(map);
			var terrainMutant = L.gridLayer.googleMutant({
				maxZoom: 24,
				type:'terrain'
				});
				
			//Capas	(baselayers solo se miestra 1. overlays se muestran todas las que pulses)
			var baseLayers = {
//					"Número total de servicios ecosistémicos":NTSE,
//					"Plano ":sendas,
//					"Sin variables": osm3,
					};
			var overlays = {
					"<b>areas<b>": layer_AREAS_0,
					"<b>sendas<b>": layer_SENDAS_1,
					"<b>mapa<b>": tile1,
					"OpenStreetMap": osm,
//					"Base física (Google Terrain)": terrainMutant,	
					"Satélite (Google Satellite)": satMutant,						
					};
				//Visualizar capas
				L.control.layers(baseLayers, overlays,{collapsed:true, position: 'topright',}).addTo(map);
				
				// leyenda 1 - NTSE
//				var htmlLegend1 = L.control.htmllegend({
//						position: 'bottomleft',
//						legends: [{
//							name: "<h3>"+ 'Número total de servicios ecosistémicos'+"<\h3>"+"<h4>"+'Número / ha'+"<\h4>",
//		//					style: style1,
//							layer: tile1,
//							elements: [{
//								label:"<h3>"+  '0 - 3'+"<\h3>",html: '',style: {'background-color': '#4575b4','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '4 - 6'+"<\h3>",html: '',style: {'background-color': '#91bfdb','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '7 - 9'+"<\h3>",html: '',style: {'background-color': '#e0f3f8','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '10 - 12'+"<\h3>",html: '',style: {'background-color': '#fee090','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '13 - 15'+"<\h3>",html: '',style: {'background-color': '#fc8d59','width': '14px','height': '14px'}}, {		
//								label:"<h3>"+  '16 - 18'+"<\h3>",html: '',style: {'background-color': '#d73027','width': '14px','height': '14px'}}, {
//								label:"<h5>"+  ''+"<\h5>",html: '',style: {'background-color': 'write','width': '0px','height': '0px'}}, {																
//								label:"<h5>"+  'Fuente: elaboración propia desde datos del MAPAMA (Proyecto SERECOS); límites: OAPN/Junta de Extremadura'+"<\h5>",html: '',style: {'background-color': 'write','width': '0px','height': '0px'},																
//							}]}],
//							collapseSimple: true,  // if true, legend entries that are from a simple renderer will use compact presentation
//							detectStretched: true,  // if true, will test to see if legend entries look stretched.  These are usually in sets of 3 with the middle element having no label.
//							collapsedOnInit: false,  // if true, legends will be collapsed when a new instance is initialized.
//							defaultOpacity: 1, // default opacity for layers in specified in legends.
//							visibleIcon: '',// 'leaflet-html-legend-icon-eye',  // css class for the visible icon on opacity slider
//							hiddenIcon: '',//'leaflet-html-legend-icon-eye-slash',  // css class for the hidden icon on opacity slider
//							toggleIcon:'',// 'leaflet-html-legend-icon-eye-slash'  // css class for the icon on visibility toggle button
//							}).addTo(map);
//						map.addControl(htmlLegend1);
//
//				// leyenda2 - tile1		
//				var htmlLegend2 = L.control.htmllegend({
//						position: 'bottomleft',
//						legends: [{
//							name: "<h3>"+'Número total de servicios ecosistémicos de abastecimiento'+"<\h3>"+"<h4>"+'Número / ha'+"<\h4>",
//		//					style: style2,
//							layer: tile1,
//							elements: [{
//								label:"<h3>"+  '0 - 3'+"<\h3>",html: '',style: {'background-color': '#4575b4','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '4 - 6'+"<\h3>",html: '',style: {'background-color': '#91bfdb','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '7 - 9'+"<\h3>",html: '',style: {'background-color': '#e0f3f8','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '10 - 12'+"<\h3>",html: '',style: {'background-color': '#fee090','width': '14px','height': '14px'}}, {
//								label:"<h3>"+  '13 - 15'+"<\h3>",html: '',style: {'background-color': '#fc8d59','width': '14px','height': '14px'}}, {		
//								label:"<h3>"+  '16 - 18'+"<\h3>",html: '',style: {'background-color': '#d73027','width': '14px','height': '14px'}}, {
//								label:"<h5>"+  ''+"<\h5>",html: '',style: {'background-color': 'write','width': '0px','height': '0px'}}, {																
//								label:"<h5>"+  'Fuente: elaboración propia desde datos del MAPAMA (Proyecto SERECOS); límites: OAPN/Junta de Extremadura'+"<\h5>",html: '',style: {'background-color': 'write','width': '0px','height': '0px'},																
//								}]}],
//							collapseSimple: true,  // if true, legend entries that are from a simple renderer will use compact presentation
//							detectStretched: true,  // if true, will test to see if legend entries look stretched.  These are usually in sets of 3 with the middle element having no label.
//							collapsedOnInit: false,  // if true, legends will be collapsed when a new instance is initialized.
//							defaultOpacity: 1, // default opacity for layers in specified in legends.
//							visibleIcon: '',// 'leaflet-html-legend-icon-eye',  // css class for the visible icon on opacity slider
//							hiddenIcon: '',//'leaflet-html-legend-icon-eye-slash',  // css class for the hidden icon on opacity slider
//							toggleIcon:'',// 'leaflet-html-legend-icon-eye-slash'  // css class for the icon on visibility toggle button
//							});
//						map.addControl(htmlLegend2);


						
						
//		//			L.control.layers(baseLayers, overlays,{collapsed:true, position: 'topright',}).addTo(map);


			// Geolocation			
			var lc = L.control.locate({
			position: 'topleft', strings: {title: "YOU ARE HERE"}
			}).addTo(map);			
			//Botones	
			var sidebar = L.control.sidebar('sidebar', { closeButton:true, position: 'left' });
			map.addControl(sidebar);
				sidebar.hide();			
				sidebar.show();
				sidebar.toggle();
			var visible = sidebar.isVisible();
			var button = new L.Control.Button(L.DomUtil.get('helpbutton'), { toggleButton: 'active', position: 'topleft'});
				button.addTo(map);
				button.on('click', function () {
				 if (button.isToggled()) {
						sidebar.hide();
					} else {
						sidebar.show();
					}
				});				
			var sidebar2 = L.control.sidebar('sidebar2', { closeButton:true, position: 'right' });
			map.addControl(sidebar2);
				sidebar2.hide();			
				sidebar2.show();
				sidebar2.toggle();
			var visible2 = sidebar.isVisible();
			var button2 = new L.Control.Button(L.DomUtil.get('helpbutton2'), { toggleButton: 'active', position: 'topright'});
				button2.addTo(map);
				button2.on('click', function () {
				 if (button2.isToggled()) {
						sidebar2.hide();
					} else {
						sidebar2.show();
					}
				});
		</script>
	</body>
</html>